<!doctype html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,maximum-scale=1">
	<title>Battleboat.js - A JavaScript AI that beats humans at battleship.</title>
	<meta name="description" content="Battleboat.js: A JavaScript AI that beats humans at battleship.">
	<meta name="keywords" content="Battleboat.js, battleship, AI, robot, JavaScript">
	<meta name="google" content="notranslate">
	<link rel="icon" type="image/png" href="img/favicon.png" />
	<link rel="image_src" href="img/apple-touch-icon-144x144-precomposed.png" />
	<link rel="apple-touch-icon" href="img/apple-touch-icon.png" />
	<link rel="apple-touch-icon-precomposed" href="img/apple-touch-icon-precomposed.png" />
	<link rel="apple-touch-icon-precomposed" sizes="57x57" href="img/apple-touch-icon-57x57-precomposed.png" />
	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="img/apple-touch-icon-72x72-precomposed.png" />
	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="img/apple-touch-icon-114x114-precomposed.png" />
	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="img/apple-touch-icon-144x144-precomposed.png" />

	<link rel="author" href="https://plus.google.com/+BillMei" />
	<link rel="publisher" href="https://plus.google.com/+BillMei" />

	<link href="css/styles_segment.css" rel="stylesheet" media="all" />

	<!-- Segment Analytics -->
	<script>
		!function () {
			var i = "analytics", analytics = window[i] = window[i] || []; if (!analytics.initialize) if (analytics.invoked) window.console && console.error && console.error("Segment snippet included twice."); else {
				analytics.invoked = !0; analytics.methods = ["trackSubmit", "trackClick", "trackLink", "trackForm", "pageview", "identify", "reset", "group", "track", "ready", "alias", "debug", "page", "screen", "once", "off", "on", "addSourceMiddleware", "addIntegrationMiddleware", "setAnonymousId", "addDestinationMiddleware", "register"]; analytics.factory = function (e) { return function () { if (window[i].initialized) return window[i][e].apply(window[i], arguments); var n = Array.prototype.slice.call(arguments); if (["track", "screen", "alias", "group", "page", "identify"].indexOf(e) > -1) { var c = document.querySelector("link[rel='canonical']"); n.push({ __t: "bpc", c: c && c.getAttribute("href") || void 0, p: location.pathname, u: location.href, s: location.search, t: document.title, r: document.referrer }) } n.unshift(e); analytics.push(n); return analytics } }; for (var n = 0; n < analytics.methods.length; n++) { var key = analytics.methods[n]; analytics[key] = analytics.factory(key) } analytics.load = function (key, n) { var t = document.createElement("script"); t.type = "text/javascript"; t.async = !0; t.setAttribute("data-global-segment-analytics-key", i); t.src = "https://cdn.segment.com/analytics.js/v1/" + key + "/analytics.min.js"; var r = document.getElementsByTagName("script")[0]; r.parentNode.insertBefore(t, r); analytics._loadOptions = n }; analytics._writeKey = "tHUX88CH9RI7gvquAoaMXjK1MSvZC0AY";; analytics.SNIPPET_VERSION = "5.2.0";
				analytics.load("tHUX88CH9RI7gvquAoaMXjK1MSvZC0AY");
				analytics.page();
			}
		}();
	</script>

	<!-- Amplitude Session Replay Standalone SDK -->
	<script src="https://cdn.amplitude.com/libs/session-replay-browser-1.29.2-min.js.gz"></script>
	<script>
		// Initialize Session Replay with Amplitude API key
		// Session Replay works independently from Segment for analytics
		const AMPLITUDE_API_KEY = "49a3ecaa7ea5305f3bdd5b2014480f8b";

		// Helper function to get cookie value
		function getCookie(name) {
			const value = `; ${document.cookie}`;
			const parts = value.split(`; ${name}=`);
			if (parts.length === 2) return parts.pop().split(';').shift();
			return null;
		}

		// Helper function to set cookie value
		function setCookie(name, value, days) {
			const expires = new Date(Date.now() + days * 864e5).toUTCString();
			document.cookie = name + '=' + encodeURIComponent(value) + '; expires=' + expires + '; path=/';
		}

		// Get or create session ID from Segment's analytics_session_id cookie
		function getStoredSessionId() {
			var sessionId = getCookie("analytics_session_id");

			if (!sessionId) {
				// Create new session ID (timestamp in milliseconds as required by Amplitude)
				sessionId = Date.now();
				// Store for 30 minutes (typical session timeout)
				setCookie("analytics_session_id", sessionId, 30 / 1440);
			} else {
				// Parse existing session ID to number
				sessionId = parseInt(sessionId, 10);
			}

			return sessionId;
		}

		// Initialize Session Replay after Segment is ready
		analytics.ready(function () {
			// Get device ID from Segment
			var deviceId = analytics.user().anonymousId();

			// Get session ID from cookie (or create if doesn't exist)
			var sessionId = getStoredSessionId();

			// Initialize Amplitude Session Replay
			window.sessionReplay.init(AMPLITUDE_API_KEY, {
				deviceId: deviceId,
				sessionId: sessionId,
				sampleRate: 1, // 100% capture rate
				debugMode: false
			});

			console.log('Session Replay initialized with Device ID:', deviceId, 'Session ID:', sessionId);
		});

		// Helper function to get session replay properties for events
		window.getSessionReplayProps = function () {
			return window.sessionReplay.getSessionReplayProperties() || {};
		};
		// Guides and Surveys standalone SDK
	</script>
	<script src="https://cdn.amplitude.com/script/49a3ecaa7ea5305f3bdd5b2014480f8b.engagement.js">
		analytics.ready(function () {
			engagement.init("49a3ecaa7ea5305f3bdd5b2014480f8b", {
				serverZone: "US",
				logLevel: 2
			});
		});
	</script>


</head>

<body>
	<div class="container">
		<h1>Battleboat.js</h1>
		<script>
			// User properties to share across Segment and Guides & Surveys
			var userProperties = {
				Game: 'BattleBoat',
				'Sportsbook Personalization': [
					{
						"Is Personalized": "false",
						"Module": "popular"
					},
					{
						"Is Personalized": "true",
						"Module": "page_tabs"
					}
				]
			};

			// Identify user with Segment
			analytics.identify(userProperties);
			analytics.ready(function () {
				window.engagement.boot({
					user: {
						user_id: analytics.user().id(),
						device_id: analytics.user().anonymousId(),
						user_properties: {}
					},
					integrations: [{
						track: (event) => {
							analytics.track(event.event_type, event.event_properties)
						}
					}]
				});
				analytics.on('track', (event, properties, options) => {
					window.engagement.forwardEvent({ event_type: event, event_properties: properties });
				});
				analytics.on('page', (event, properties, options) => {
					window.engagement.forwardEvent({ event_type: event, event_properties: properties });
				});
			});



		</script>
		<p class="tagline">A JavaScript AI that beats humans at battleship.</p>
		<p>How to play</p>
		<ol class="instructions">
			<li id="step1">Select your ships from the left-hand side</li>
			<li id="step2">Place your ships on your map</li>
			<li id="step3">Click on the cells of the enemy's map<br>
				to find and destroy all five enemy ships</li>
			<li id="step4">The computer will fire on your ships<br>
				immediately after you fire on its ships.</li>
		</ol>
		<div class="game-container">
			<div id="restart-sidebar" class="hidden">
				<h2>Try Again</h2>
				<button id="restart-game">Restart Game</button>
			</div>
			<div id="roster-sidebar">
				<h2>Place Your Ships</h2>
				<ul class="fleet-roster">
					<li id="patrolboat">Patrol Boat</li>
					<li id="submarine">Submarine</li>
					<li id="destroyer">Destroyer</li>
					<li id="battleship">Battleship</li>
					<li id="carrier">Aircraft Carrier</li>
				</ul>
				<button id="rotate-button" data-direction="0">Rotate Ship</button>
				<button id="start-game" class="hidden">Start Game</button>
				<button id="place-randomly" class="hidden">Place Randomly and Start</button>
			</div>
			<div id="stats-sidebar">
				<h2>Stats</h2>
				<p><strong>Games Won</strong></p>
				<p id="stats-wins">0 of 0</p>
				<p><strong>Accuracy</strong></p>
				<p id="stats-accuracy">0%</p>
				<button id="reset-stats">Reset Stats</button>
				<button id="prob-heatmap" class="hidden">Show Probability Heatmap</button>
			</div>
			<div class="grid-container">
				<h2>Your Fleet</h2>
				<div class="grid human-player"><span class="no-js">Please enable JavaScript to play this game</span>
				</div>
			</div>
			<div class="grid-container">
				<h2>Enemy Fleet</h2>
				<div class="grid computer-player"><span class="no-js">Please enable JavaScript to play this game</span>
				</div>
			</div>
		</div>

		<p>Created by <a href="https://billmei.net">Bill Mei</a>.</p>
		<p>This project is open source <a href="https://github.com/billmei/battleboat">on GitHub</a>.</p>
	</div>

	<a href="https://github.com/billmei/battleboat"><img style="position: absolute; top: 0; right: 0; border: 0;"
			src="https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67"
			alt="Fork me on GitHub"
			data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"></a>

	<script async src="https://www.googletagmanager.com/gtag/js?id=G-MDXLY4NGC1"></script>
	<script>
		// Don't change this variable.
		var DEBUG_MODE = localStorage.getItem('DEBUG_MODE') === 'true';
		// To turn DEBUG_MODE on, run `setDebug(true);` in the console.
		if (!DEBUG_MODE) {
			window.dataLayer = window.dataLayer || [];
			function gtag() { dataLayer.push(arguments); }
			gtag('js', new Date());
			gtag('config', 'G-MDXLY4NGC1');
		}
	</script>

	<script src="js/battleboat_segment.js"></script>
	<span class="prefetch" id="prefetch1"></span>
	<span class="prefetch" id="prefetch2"></span>
	<span class="prefetch" id="prefetch3"></span>
</body>

</html>